<style type="text/css">
tr.entry-group-rows td { background: #fff; font-weight: bold; border-bottom: solid 1px #000;}
tr.entry-group-rows.root-set td { border-top: solid 1px #000; }
tr.entry-group-rows.with-subsets td { border-bottom: none; }
tr.entry-group-rows td.first-col { width: 3%;}
table tfoot td { border-top: solid 2px #000; }
</style>

<h1><%= @query_name %></h1>
<% @summed_up_values ||= {} %>

<table class="factura-sheet">
  <thead>
    <tr>
      <% @time_entry_groups.columns.each do |col_name| %>
        <th><%= budget_sheet_header_label(col_name) %></th>
      <% end %>
    </tr>
  </thead>
  <tbody>
    <% @time_entry_groups.root_sets.each do |set| %>
      <%= render "better_budgetsheets_factura/rows_for_set", set: set, time_entry_groups: @time_entry_groups %>
    <% end %>
  </tbody>
  <tfoot>
    <tr>
      <td colspan="<%= @time_entry_groups.columns.size %>"><%= I18n.t("better_budgetsheets.sum") %></td>
    </tr>
    <tr>
      <% @time_entry_groups.columns.each do |col_name| %>

          <td class="text-right">
            <% if @summed_up_values[col_name] %>
              <%= @summed_up_values[col_name].to_euro %>
            <% end %>
          </td>

      <% end %>
    </tr>
  </tfoot>
</table>